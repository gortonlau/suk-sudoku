<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="format-detection" content="telephone=no">
    <title>SUK - 数独游戏</title>
    <link rel="stylesheet" href="./static/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>SUK ⚡️ 数独游戏</h1>
            <div class="app-url">
                <a href="http://shudu.suk.pub" target="_blank" rel="noopener noreferrer">
                    🌐 http://shudu.suk.pub
                </a>
            </div>
            <div class="game-info">
                <div class="timer">
                    <span>时间: </span>
                    <span id="timer">00:00</span>
                </div>
                <div class="difficulty">
                    <label for="difficulty-select">难度: </label>
                    <select id="difficulty-select">
                        <option value="easy">初级</option>
                        <option value="medium">中级</option>
                        <option value="hard">高级</option>
                    </select>
                </div>
            </div>
        </header>

        <main>
            <!-- 主要控制按钮 -->
            <div class="main-controls">
                <button id="new-game-btn" class="btn btn-primary btn-compact">
                    <span class="btn-icon">🎮</span>新游戏
                </button>
                <button id="restart-btn" class="btn btn-warning btn-compact">
                    <span class="btn-icon">🔄</span>重新开始
                </button>
                <button id="pause-btn" class="btn btn-info btn-compact">
                    <span class="btn-icon">⏸️</span>暂停
                </button>
                <button id="undo-btn" class="btn btn-secondary btn-compact">
                    <span class="btn-icon">↶</span>撤销
                </button>
                <button id="redo-btn" class="btn btn-secondary btn-compact">
                    <span class="btn-icon">↷</span>重做
                </button>
            </div>

            <div class="sudoku-container">
                <div id="sudoku-grid" class="sudoku-grid">
                    <!-- 9x9 grid will be generated by JavaScript -->
                </div>
            </div>

            <div class="number-pad">
                <button class="number-btn" data-number="1">1</button>
                <button class="number-btn" data-number="2">2</button>
                <button class="number-btn" data-number="3">3</button>
                <button class="number-btn" data-number="4">4</button>
                <button class="number-btn" data-number="5">5</button>
                <button class="number-btn" data-number="6">6</button>
                <button class="number-btn" data-number="7">7</button>
                <button class="number-btn" data-number="8">8</button>
                <button class="number-btn" data-number="9">9</button>
                <button class="number-btn" data-number="0">X</button>
            </div>

            <!-- 其他功能按钮 -->
            <div class="secondary-controls">
                <button id="hint-btn" class="btn btn-info btn-small">
                    <span class="btn-icon">💡</span>提醒
                </button>
                <button id="check-btn" class="btn btn-warning btn-small">
                    <span class="btn-icon">🔍</span>检查
                </button>
                <button id="save-game-btn" class="btn btn-success btn-small">
                    <span class="btn-icon">💾</span>保存
                </button>
                <button id="load-game-btn" class="btn btn-success btn-small">
                    <span class="btn-icon">📁</span>加载
                </button>
                <button id="solve-btn" class="btn btn-danger btn-small">
                    <span class="btn-icon">🔓</span>答案
                </button>
                <button id="help-btn" class="btn btn-secondary btn-small">
                    <span class="btn-icon">❓</span>帮助
                </button>
            </div>

            <div class="game-status">
                <div id="message" class="message"></div>
                <div id="progress" class="progress">
                    <div class="progress-bar">
                        <div id="progress-fill" class="progress-fill"></div>
                    </div>
                    <span id="progress-text">0/81</span>
                </div>
            </div>
        </main>

        <!-- 游戏完成弹窗 -->
        <div id="victory-modal" class="modal">
            <div class="modal-content">
                <h2>🎉 恭喜完成！</h2>
                <div id="victory-stats">
                    <p>完成时间: <span id="final-time"></span></p>
                    <p>难度: <span id="final-difficulty"></span></p>
                    <p>使用提醒次数: <span id="hint-count"></span></p>
                </div>
                <div class="modal-buttons">
                    <button id="new-game-modal-btn" class="btn btn-primary">再来一局</button>
                    <button id="close-modal-btn" class="btn btn-secondary">关闭</button>
                </div>
            </div>
        </div>

        <!-- 暂停遮罩 -->
        <div id="pause-overlay" class="pause-overlay">
            <div class="pause-content">
                <h2>游戏已暂停</h2>
                <button id="resume-btn" class="btn btn-primary">继续游戏</button>
            </div>
        </div>

        <!-- 帮助弹窗 -->
        <div id="help-modal" class="modal">
            <div class="modal-content help-content">
                <h2>🎮 游戏帮助</h2>
                <div class="help-section">
                    <h3>🎯 游戏规则</h3>
                    <p>在9×9的网格中填入数字1-9，使得每行、每列和每个3×3的九宫格都包含1-9的所有数字。</p>
                </div>
                <div class="help-section">
                    <h3>🎮 操作方式</h3>
                    <ul>
                        <li>点击数字按钮选择要填入的数字</li>
                        <li>点击网格单元格放置数字</li>
                        <li>再次点击已选中的数字可取消选择</li>
                        <li>错误的数字会显示冲突提醒</li>
                    </ul>
                </div>
                <div class="help-section">
                    <h3>⌨️ 快捷键</h3>
                    <ul>
                        <li><kbd>1-9</kbd>: 选择数字</li>
                        <li><kbd>0/Delete/Backspace</kbd>: 清除数字</li>
                        <li><kbd>Ctrl+Z</kbd>: 撤销</li>
                        <li><kbd>Ctrl+Y</kbd>: 重做</li>
                        <li><kbd>Ctrl+S</kbd>: 保存游戏</li>
                        <li><kbd>Ctrl+O</kbd>: 加载游戏</li>
                        <li><kbd>Ctrl+N</kbd> / <kbd>R</kbd>: 新游戏</li>
                        <li><kbd>H</kbd>: 提醒</li>
                        <li><kbd>Space</kbd>: 暂停/继续</li>
                        <li><kbd>Esc</kbd>: 取消选择</li>
                    </ul>
                </div>
                <div class="help-section">
                    <h3>🎚️ 难度说明</h3>
                    <ul>
                        <li><strong>初级</strong>: 数字分布松散，较容易解决</li>
                        <li><strong>中级</strong>: 数字分布平衡，中等难度</li>
                        <li><strong>高级</strong>: 数字分布聚集，更有挑战性</li>
                    </ul>
                </div>
                <button id="close-help-btn" class="btn btn-primary">关闭</button>
            </div>
        </div>

        <!-- 保存游戏弹窗 -->
        <div id="save-modal" class="modal">
            <div class="modal-content">
                <h2>💾 保存游戏</h2>
                <div class="input-group">
                    <label for="save-name">保存名称：</label>
                    <input type="text" id="save-name" class="save-input" placeholder="请输入保存名称">
                </div>
                <div class="modal-buttons">
                    <button id="confirm-save-btn" class="btn btn-primary">保存</button>
                    <button id="cancel-save-btn" class="btn btn-secondary">取消</button>
                </div>
            </div>
        </div>

        <!-- 加载游戏弹窗 -->
        <div id="load-modal" class="modal">
            <div class="modal-content">
                <h2>📁 加载游戏</h2>
                <div class="save-list" id="save-list">
                    <!-- 保存的游戏列表将在这里显示 -->
                </div>
                <div class="modal-buttons">
                    <button id="cancel-load-btn" class="btn btn-secondary">取消</button>
                </div>
            </div>
        </div>

        <!-- 新游戏确认弹窗 -->
        <div id="new-game-confirm-modal" class="modal">
            <div class="modal-content">
                <h2>🎮 开始新游戏</h2>
                <div class="confirm-message">
                    <p>确定要开始新游戏吗？</p>
                    <p class="warning-text">⚠️ 当前进度将会丢失且无法恢复</p>
                </div>
                <div class="modal-buttons">
                    <button id="confirm-new-game-btn" class="btn btn-primary">开始新游戏</button>
                    <button id="cancel-new-game-btn" class="btn btn-secondary">取消</button>
                </div>
            </div>
        </div>

        <!-- 版权信息 -->
        <footer class="footer">
            <div class="copyright">
                <p>© 2025 SUK 数独游戏</p>
                <p>开发者：<a href="https://github.com/gortonlau" target="_blank" rel="noopener noreferrer">gortonlau</a></p>
            </div>
        </footer>
    </div>

    <script src="./static/config.js"></script>
    <script src="./static/sudoku.js"></script>
</body>
</html>
